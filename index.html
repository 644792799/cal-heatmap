<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Cal-HeatMap : Calendar Heat map with d3.js</title>


	<link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/default.min.css" />
	<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
	<link rel="stylesheet" href="./css/cal-heatmap.css" />
	<link rel="stylesheet" href="./css/main.css" />
	<link href='http://fonts.googleapis.com/css?family=Signika+Negative:400,700' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
	<script type="text/javascript" src="./js/cal-heatmap.min.js"></script>
</head>
<body>
	<a href="https://github.com/kamisama/cal-heatmap"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>


	<div class="ftr">
		<div class="container">

			<h1>Calendar Heat Map</h1>

			<p>
				Cal-Heatmap is a javascript plugin to help create a calendar heat map, to visualize your time series datas a la <a href="https://github.com/blog/1360-introducing-contributions">GitHub contribution graph</a>.
			</p>

			<div class="bs-docs-example">


			<div id="cal-heatmap">
				<div class="graph"></div>
			</div>
			<script type="text/javascript">
				var calendar = new CalHeatMap();
				calendar.init({
					uri: "datas-hours.json",
					start : new Date(2000, 0)
				});
			</script>
			</div>

		</div>
	</div>

	<div class="container">

		<h2><a href="#setup" id="setup">Setup</a></h2>

		<ol>
			<li><a href="https://github.com/kamisama/cal-heatmap/archive/master.zip">Download the plugin</a> and copy <b>cal-heatmap.min.js</b> and <b>cal-heatmap.css</b> to your app.</li>

			<li>Install <a href="http://d3js.org/">d3js</a> in your app.</li>

			<li>Create your first calendar:
			<pre class="code html"><code>&lt;div id="cal-heatmap">&lt;/div>
&lt;script type="text/javascript">
	var cal = new CalHeatMap();
	cal.init({
		uri: "datas.json"
	});
&lt;/script></code></pre>
		</li>
		</ol>

		<p>This will insert a new calendar into #cal-heatmap in your page, and fill it with datas from <code>datas.json</code>.</p>

		<p>By default, the calendar will display 12 hours, divided into 60 minutes.</p>

		<p>There's a lot of other settings available to customize your calendar.</p>

		<h2><a href="#api" id="api">API</a></h2>

		<table class="table table-bordered">
			<tr>
				<th>Name</th>
				<th>Type</th>
				<th>Default</th>
				<th>Description</th>
			</tr>
			<tr>
				<td><code>uri</code></td>
				<td>String</td>
				<td>""</td>
				<td>
					<a href="#range-example" class="example-link">Example</a>
					<strong>The calendar datas source</strong>
					<p>Path to a <a href="#data-source">JSON file</a></p></td>
			</tr>
			<tr>
				<td><code>id</code></td>
				<td>String</td>
				<td>#cal-heatmap</td>
				<td>
					<a href="#range-example" class="example-link">Example</a>
					ID of the element to insert the calendar to</td>
			</tr>
			<tr>
				<td><code>domain</code></td>
				<td>String</td>
				<td>hour</td>
				<td>
					<a href="#domain-example" class="example-link">Example</a>
					<strong>Type of time unit for the domain</strong>
					<p>Can take one of the following values :</p>
					<ul>
						<li>hour</li>
						<li>day</li>
						<li>week</li>
						<li>month</li>
						<li>year</li>
					</ul></td>
			</tr>
			<tr>
				<td><code>subDomain</code></td>
				<td>String</td>
				<td>min</td>
				<td>
					<a href="#domain-example" class="example-link">Example</a>
					<strong>Time division inside the domain</strong>
					<p>Can take one of the following values :</p>
					<ul>
						<li>min</li>
						<li>hour</li>
						<li>day</li>
						<li>week</li>
						<li>month</li>
					</ul></td>
			</tr>
			<tr>
				<td><code>range</code></td>
				<td>integer</td>
				<td>12</td>
				<td>
					<a href="#range-example" class="example-link">Example</a>
					Number of domain to display</td>
			</tr>
			<tr>
				<td><code>start</code></td>
				<td>Date</td>
				<td>new Date()</td>
				<td>
					<a href="#range-example" class="example-link">Example</a>
					<strong>Start Date of the calendar</strong>
					<p>Default is the current date.<br/>
					The calendar does not start at this date, but at the beginning of the domain. If the domain is a day, the calendar will start at 00:00 on this date, if it's a month, it will start at the 1 of the month of the date.
					</p></td>
			</tr>
			<tr>
				<td><code>cellsize</code></td>
				<td>integer</td>
				<td>10</td>
				<td>
					<a href="#cell-example" class="example-link">Example</a>
					Size of each sudDomain cell, in pixel</td>
			</tr>
			<tr>
				<td><code>cellpadding</code></td>
				<td>integer</td>
				<td>2</td>
				<td>
					<a href="#cell-example" class="example-link">Example</a>
					Gutter between each subDomain cell, in pixel</td>
			</tr>
			<tr>
				<td><code>scales</code></td>
				<td>Array</td>
				<td>[10, 20, 30, 40]</td>
				<td><a href="#scale-example" class="example-link">Example</a>
				<strong>Threshold for the scale</strong>
				<p>Each couple of values represent a color on the calendar :</p>

				<ul>
					<li>0</li>
					<li>1 -> 9</li>
					<li>10 -> 19</li>
					<li>20 -> 29</li>
					<li>30 -> 39</li>
					<li>More than 40</li>
				</ul>

				<p>It also accepts negative and float values.</p>

				<p>You can set more than 4 threshold. Each threshold correspond to 1 class in the css file. Be default, the css support only 4 threshold. Add the corresponding class to the css.</p>
				</td>
			</tr>
			<tr>
				<td><code>displayScale</code></td>
				<td>Boolean</td>
				<td>true</td>
				<td>
					<a href="#format-example" class="example-link">Example</a>
					Whether to display the scale</td>
			</tr>
			<tr>
				<td><code>loadOnInit</code></td>
				<td>Boolean</td>
				<td>true</td>
				<td><strong>Whether to fill the calendar with the datas, on calendar creation</strong>
					<p>Passing <code>false</code> will create a blank calendar.</p></td>
			</tr>
			<tr>
				<td><code>itemName</code></td>
				<td>Array</td>
				<td>["item", "items"]</td>
				<td>
					<a href="#itemname-example" class="example-link">Example</a>
					<strong>Name of the data type you're representing on the calendar</strong>
					<p>First index is the singular form, second index is the plural form.</p></td>
			</tr>
			<tr>
				<td><code>onClick</code></td>
				<td>callback</td>
				<td>null</td>
				<td>
					<a href="#format-example" class="example-link">Example</a>
					<strong>Callback when clicking on a subdomain cell</strong>
					<p>2 arguments is passed to the callback :</p>
					<ul>
						<li><code>date</code>: Date of the cell that was clicked</li>
						<li><code>itemNb</code>: Count number occured at this date</li>
					</ul></td>
			</tr>
			<tr>
				<td><code>format</code></td>
				<td>Object</td>
				<td>{}</td>
				<td>
					<a href="#format-example" class="example-link">Example</a>
					<strong>Custom formatting of dates and labels</strong>
					<p>This object has two properties :</p>
					<ul>
						<li><code>date</code> : Formatting of the date displayed when hovering a sudDomain cell</li>
						<li><code>label</code> : Formatting of the domain label, displayed below each domain</li>
					</ul>

				<p>Refer to <a href="https://github.com/mbostock/d3/wiki/Time-Formatting">d3.js time formatting documentation</a> for accepted format.</p>

				<p>You have to always set the 2 properties, even you wish to only change one. They're by default null, and depends on the domain and subdomain used.</p>

				</td>
			</tr>
		</table>

		<h2><a href="#examples" id="examples">Examples</a></h2>


		<div class="bs-docs-example">
			<h3 id="range-example">Custom range</h3>
		<p>Display 6 hours, from midnight on January 1st, 2000. Each hours is split in 60 minutes.</p>

		<div id="graph_a"></div>
		<script type="text/javascript">
			var calendar = new CalHeatMap();
			calendar.init({
				uri: "datas-hours.json",
				start : new Date(2000, 0),
				id : "graph_a",
				range : 6
			});
		</script>
		</div>
		<pre class="prettyprint javascript"><code>var calendar = new CalHeatMap();
calendar.init({
	uri: "data-hours.json",		// Fill the calendar with the datas from datas-hours.json
	start : new Date(2000, 0),	// Start the graph on January 2000
	id : "graph_a", 		// Prepend the calendar to the #graph_a in the DOM
	range : 6 			// Just display 6 hours
});</code></pre>


		<div class="bs-docs-example">
			<h3 id="domain-example">By days, then by hours</h3>
		<p>Display all the hours for 15 days, starting from January 15th, 2000</p>

		<div id="graph_b"></div>
		<script type="text/javascript">
			var calendar = new CalHeatMap();
			calendar.init({
				uri: "datas-years.json",
				start: new Date(2000, 0, 15),
				id : "graph_b",
				range : 15,			// Number of days to display
				domain : "day",		// Display days
				subDomain : "hour"	// Split each day by hours
			});
		</script>
</div>
		<pre class="prettyprint javascript"><code>CalHeatMap.init({
	uri: "datas-years.json",
	start: new Date(2000, 0, 15),
	id : "graph_b",
	domain : "day",		// Group datas by days
	subDomain : "hour",	// Split each day by hours
	range : 15		// Number of days to display
});</code></pre>



	<div class="bs-docs-example">
		<h3 id="scale-example">By months, then by days</h3>
	<p>Display all days, for 3 months, from February 2000.<br/>
		Let's try changing the scale threshold, since the number of datas represented in a subdomain is larger, since it's now a day instead of hour. Hover on the scale to view the new range each color is representing.</p>

		<ul>
			<li><small>Hover on the scale to notice that each color is now representing a different range than the previous calendar</small></li>
			<li><small>The date formatting when you hover on a day is also changed, according to the subdomain</small></li>
		</ul>

		<div id="graph_c"></div>
		<script type="text/javascript">
			var calendar = new CalHeatMap();
			calendar.init({
				uri: "datas-years.json",
				start: new Date(2000, 1),
				id : "graph_c",
				domain : "month",
				subDomain : "day",
				range : 3,
				scales: [40, 60, 80, 100]
			});
		</script>
</div>
		<pre class="prettyprint javascript"><code>CalHeatMap.init({
	uri: "datas-years.json",
	start: new Date(2000, 1),
	id : "graph_c",
	domain : "month",		// Group datas by month
	subDomain : "day",		// Split each month by days
	range : 3,			// Just display 3 months
	scales: [40, 60, 80, 100] 	// Custom threshold for the scale
});</code></pre>


	<div class="bs-docs-example">
		<h3 id="cell-example">By months, then by hours</h3>
	<p>Display all the hours of January 2000.<br/>
		Also resize the cell to fit in the page</p>

		<div id="graph_f"></div>
		<script type="text/javascript">
			var calendar = new CalHeatMap();
			calendar.init({
				uri: "datas-years.json",
				start: new Date(2000, 0),
				id : "graph_f",
				domain : "month",
				subDomain : "hour",
				range : 1,
				cellsize: 6,
				cellpadding: 1
			});
		</script>
</div>
		<pre class="prettyprint javascript"><code>CalHeatMap.init({
	uri: "datas-years.json",
	start: new Date(2000, 0),
	id : "graph_f",
	domain : "month",
	subDomain : "hour",
	range : 1,
	cellsize: 6,
	cellpadding: 1
});</code></pre>

	<div class="bs-docs-example">
		<h3>By months, then by weeks</h3>
	<p>Display weeks for February, March and April 2000.</p>

		<div id="graph_j"></div>
		<script type="text/javascript">
			var calendar = new CalHeatMap();
			calendar.init({
				uri: "datas-years.json",
				start: new Date(2000, 1),
				id : "graph_j",
				domain : "month",
				subDomain : "week",
				range : 3,
				scales: [120, 400, 450, 500]
			});
		</script>
</div>
		<pre class="prettyprint javascript"><code>CalHeatMap.init({
	uri: "datas-years.json",
	start: new Date(2000, 1),
	id : "graph_c",
	domain : "month",		// Group datas by month
	subDomain : "week",		// Split each month by week
	range : 3,			// Just display 3 months
	scales: [120, 400, 450, 500] 	// Custom threshold for the scale
});</code></pre>

	<div class="bs-docs-example">
		<h3>By weeks, then by hours</h3>
	<p>Display all the hours of the first 2 weeks of Januray 2000</p>

		<div id="graph_h"></div>
		<script type="text/javascript">
			var calendar = new CalHeatMap();
			calendar.init({
				uri: "datas-years.json",
				start: new Date(2000, 0),
				id : "graph_h",
				domain : "week",
				subDomain : "hour",
				range : 2
			});
		</script>
</div>
		<pre class="prettyprint javascript"><code>CalHeatMap.init({
	uri: "datas-years.json",
	start: new Date(2000, 0),
	id : "graph_h",
	domain : "week",
	subDomain : "hour",
	range : 2
});</code></pre>





	<div class="bs-docs-example">
		<h3 id="itemname-example">By year, then by days</h3>
	<p>Display all days of year 2000.<br/>
		Additionally, use a custom name for the datas : we're representing the number of <b>lost kittens</b> by days.</p>

		<ul>
			<li><small>Hover on a day to view the new title</small></li>
		</ul>

		<div id="graph_d"></div>
		<script type="text/javascript">
			var calendar = new CalHeatMap();
			calendar.init({
				uri: "datas-years.json",
				start: new Date(2000, 0),
				id : "graph_d",
				domain : "year",
				subDomain : "day",
				range : 1,
				scales: [40, 60, 80, 100],
				itemName: ["lost kitten", "lost kittens"]
			});
		</script>
</div>
		<pre class="prettyprint javascript"><code>CalHeatMap.init({
	uri: "datas-years.json",
	start: new Date(2000, 0),
	id : "graph_d",
	domain : "year",
	subDomain : "day",
	range : 1,
	scales: [40, 60, 80, 100],
	itemName: ["lost kitten", "lost kittens"]	// Use another data name instead of the boring "items"
});</code></pre>


	<div class="bs-docs-example">
		<h3 id="format-example">By year, then by months, with custom callback onClick</h3>
	<p>Display 1 year, split by months, with custom legend and title formatting</p>

	<ul>
		<li><small>Hover on a cell to view custom title formatting</small></li>
		<li><small>Click on a cell to view custom onClick callback</small></li>
	</ul>

		<div id="graph_e"></div>
		<script type="text/javascript">
			var calendar = new CalHeatMap();
			calendar.init({
				uri: "datas-years.json",
				start: new Date(2000, 0),
				id : "graph_e",
				range : 1,
				domain : "year",
				subDomain : "month",
				scales: [1950, 2050, 2150, 2250],
				displayScale: false,
				format: {
					date: "==%B==",
					legend: "Thy year is %Y, yeah !"
				},
				onClick: function(date, count) {
					alert("Oh gosh, " + count + " things occured on " + date.toISOString());
				}
			});
		</script>




		</div>
		<pre class="prettyprint javascript"><code>CalHeatMap.init({
	uri: "datas-years.json",
	start: new Date(2000, 0),
	id : "graph_e",
	range : 1,
	domain : "year",
	subDomain : "month",
	scales: [1950, 2050, 2150, 2250],
	displayScale: false,				// Don't display the scale
	format: {
		date: "==%B==",				// Custom date format, hover on a month to view
		legend: "Thy year is %Y, yeah !"	// Custom domain legend
	},
	onClick: function(date, count) {
		alert("Oh gosh, " + count + " things occured on " + date.toISOString());
	}
});</code></pre>

<h2><a href="#data-source" id="data-source">Data Source</a></h2>

<p>The source data file is a simple JSON file formatted like that :</p>

<pre class="json"><code>{
	"946702811" : 12,
	"946702812" : 53
	....
}</code></pre>

<p>See <a href="./datas-hours.json">the example datas-hours.json</a> file.</p>

<p>Each entry is a couple <b>timestamp</b> : <b>count</b>, representing the number of occurence of an event at a certain second. </p>

<p>It's the same formatting for all domain type, datas will automatically be grouped into min/days/week/hours/month, depending on the domain type.</p>

<h2><A href="#support" id="support">Support</a></h2>

<p>Support and bug reports are on tracked with the project <a href="https://github.com/kamisama/cal-heatmap/issues">github issues</a></p>

<p>Faq : <a href="https://github.com/kamisama/cal-heatmap/wiki/FAQ">https://github.com/kamisama/cal-heatmap/wiki/FAQ</a></p>



<h2><a href="#authors" id="authors">Authors</a></h2>

<p>Wan Qi Chen</p>

<ul>
	<li><b>Github</b>: <a href="https://github.com/kamisama">https://github.com/kamisama</a></li>
	<li><b>Email</b> : kami@kamisama.me</li>
</ul>

<h2><a href="#licence" id="licence">Licence</a></h2>

<p>CalHeatMap is released under the MIT License</p>

<pre>
Copyright (c) 2013 Wan Qi Chen

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</pre>

</div>


<script type="text/javascript" src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38672186-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>